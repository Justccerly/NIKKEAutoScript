"use strict";const{app:t,BrowserWindow:i}=require("electron"),d=require("path"),c=require("electron-win-state").default;require("./ipc/WindowStrategy");require("./ipc/Flask");let e=null;const n=new c({defaultWidth:1280,defaultHeight:720});function o(){e=new i({...n.winOptions,show:!1,frame:!1,titleBarStyle:"hiddenInset",webPreferences:{preload:d.join(__dirname,"preload.js"),zoomFactor:1,webSecurity:!1}}),t.isPackaged?e.loadFile("./dist/index.html"):(e.loadURL("http://localhost:5173/"),e.webContents.openDevTools()),e.on("ready-to-show",()=>{e.show()}),n.manage(e)}t.whenReady().then(()=>{o(),t.on("activate",function(){i.getAllWindows().length===0&&o()}),e.on("resize",()=>{const{width:s,height:a}=e.getContentBounds(),l=s/1280,r=a/720;e.webContents.send("transform",Math.min(l,r))})});t.on("window-all-closed",function(){process.platform!=="darwin"&&t.quit()});
