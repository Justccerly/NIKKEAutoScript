"use strict";const{app:t,BrowserWindow:a}=require("electron"),d=require("path"),c=require("electron-win-state").default;require("./ipc/WindowStrategy");require("./ipc/Flask");let e=null;const i=new c({defaultWidth:1280,defaultHeight:720});function s(){e=new a({...i.winOptions,show:!1,frame:!1,titleBarStyle:"hiddenInset",webPreferences:{preload:d.join(__dirname,"preload.js"),zoomFactor:1,webSecurity:!1}}),t.isPackaged?e.loadFile("./dist/index.html"):(e.loadURL("http://localhost:5173/"),e.webContents.openDevTools()),e.on("ready-to-show",()=>{e.show()}),i.manage(e)}t.whenReady().then(()=>{s(),t.on("activate",function(){a.getAllWindows().length===0&&s()}),e.on("resize",()=>{const{width:l,height:r}=e.getContentBounds(),n=l/1280,o=r/720;console.log(Math.min(n,o)),e.webContents.send("transform",Math.min(n,o))})});t.on("window-all-closed",function(){process.platform!=="darwin"&&t.quit()});
